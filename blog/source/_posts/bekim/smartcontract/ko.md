---
title: "[Research] From Paper to Code: Smart Contract [ko]"
author: bekim
tags: [smartcontract, blockchain, ethereum, bekim]
categories: [Research]
date: 2025-07-13 17:00:00
cc: true
index_img: /2025/07/13/bekim/smartcontract/ko/image.jpg
---


## Introduction

ì•ì„  ê¸€ì—ì„œ ìš°ë¦¬ëŠ” ë¸”ë¡ì²´ì¸ê³¼ í•©ì˜ ì•Œê³ ë¦¬ì¦˜ì„ ì‚´í´ë³´ë©°, íƒˆì¤‘ì•™í™”ëœ êµ¬ì¡°ì— ëŒ€í•´ ì„¤ëª…í–ˆì–´ìš”. ì´ë²ˆì—ëŠ” ë¸”ë¡ì²´ì¸ ìœ„ì— êµ¬ì¶•ë  ìˆ˜ ìˆëŠ” í•µì‹¬ ê¸°ìˆ ì¸ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì— ëŒ€í•´ ë‹¤ë¤„ë³´ë ¤ê³  í•´ìš”.

ê¸°ì¡´ì˜ ê³„ì•½ì€ ì¢…ì´ ë¬¸ì„œì™€ ì„œëª…ìœ¼ë¡œ ì§„í–‰ë˜ì—ˆì§€ë§Œ, ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ëŠ” ì´ ê³„ì•½ ì¡°ê±´ì„ ì½”ë“œë¡œ êµ¬í˜„í•˜ê³ , íŠ¹ì • ì¡°ê±´ì´ ì¶©ì¡±ë˜ë©´ ì¤‘ê°œì ì—†ì´ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤.
ì´ ê¸€ì—ì„œëŠ” Smart Contractì˜ ì›ë¦¬ì™€ ì‚¬ë¡€ë¥¼ ì†Œê°œí•˜ê³ , ì´ì— ëŒ€í•œ ë³´ì•ˆ ì·¨ì•½ì ë„ í•¨ê»˜ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

## ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸

ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ëŠ” ë¯¸ë¦¬ ì •í•´ë‘” ì¡°ê±´ì´ ì¶©ì¡±ë˜ë©´ í•´ë‹¹ ê³„ì•½ì´ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ê³„ëœ ì½”ë“œì—ìš”. ê³„ì•½ ì¡°ê±´ì„ ì½”ë“œë¡œ êµ¬í˜„í•´ì„œ ë¸”ë¡ì²´ì¸ ìƒì—ì„œë„ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ê³„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ íŠ¹ì„± ë•ë¶„ì— ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ëŠ” ì¤‘ê°œ ë¹„ìš©ì„ ì ˆê°í•  ìˆ˜ ìˆê³  ì œ3ì ì—†ì´ ê³„ì•½ì„ ì´í–‰í•  ìˆ˜ ìˆì–´ìš”.

ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì˜ ê°œë…ì€ 1994ë…„, ë‹‰ ì‚¬ë³´(Nick Szabo)ì— ì˜í•´ ì²˜ìŒìœ¼ë¡œ ì œì•ˆ ë˜ì—ˆì–´ìš”. (ì—¬ë‹´ì´ì§€ë§Œ Nick SzaboëŠ” ì‚¬í† ì‹œ ë‚˜ì¹´ëª¨í† ë¡œ ì¶”ì •ë˜ëŠ” ì¸ë¬¼ ì¤‘ í•œ ëª…ìœ¼ë¡œ ìì£¼ ì–¸ê¸‰ë˜ê³  ìˆì–´ìš”) í•˜ì§€ë§Œ ì´ ë•ŒëŠ” ê°œë… ë¿ì´ì—ˆê³ , ê¸°ìˆ ì  ì‹¤í˜„ì€ ê·¸ ì´í›„ì— ì´ë£¨ì–´ì¡Œì–´ìš”. 2013ë…„ ì´ë”ë¦¬ì›€ì˜ ì°½ì‹œìì¸ ë¹„íƒˆë¦­ ë¶€í…Œë¦°(Vitalik Buterin)ì€ ìì‹ ì˜ ë¸”ë¡œê·¸ì— [ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ìƒˆë¡œìš´ ë¸”ë¡ì²´ì¸ í”Œë«í¼ì˜ ê°œë…ì„ ë‹´ì€ ë°±ì„œ](https://web.archive.org/web/20131228111141/http://vbuterin.com/ethereum.html)ë¥¼ ê³µê°œí–ˆì–´ìš”. ì´í›„ ì´ë”ë¦¬ì›€ì´ë¼ëŠ” ë¸”ë¡ì²´ì¸ í”Œë«í¼ì´ 2015ë…„ì— ì •ì‹ìœ¼ë¡œ ëŸ°ì¹­ë˜ì—ˆê³ , ë³¸ê²©ì ìœ¼ë¡œ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ê°€ ì‹¤ì œ ë¸”ë¡ì²´ì¸ ìƒì—ì„œ ì‚¬ìš©ë˜ê¸° ì‹œì‘í–ˆì–´ìš”.

![](ko/image.jpg)

í˜„ì¬ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ëŠ” ì´ë”ë¦¬ì›€ ì™¸ì—ë„ ë‹¤ì–‘í•œ ë¸”ë¡ì²´ì¸ í”Œë«í¼ì—ì„œ ì“°ì´ê³  ìˆê³ , ì´ëŸ° ê³„ì•½ë“¤ì€ ëŒ€ë¶€ë¶„ if-then ì¡°ê±´ë¬¸ í˜•íƒœë¡œ ì‘ì„±ëœ ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤. ë¸”ë¡ì²´ì¸ì€ ì—¬ëŸ¬ ì°¸ì—¬ìê°€ ê°™ì€ ì •ë³´ë¥¼ ê³µìœ í•˜ê³  ê²€ì¦í•˜ëŠ” êµ¬ì¡°ì´ê¸° ë•Œë¬¸ì—, ê³„ì•½ ì¡°ê±´ì„ ê²€ì¦í•˜ê³  ì‹¤í–‰í•˜ê¸°ì— ë§¤ìš° ì ì ˆí•œ í™˜ê²½ìœ¼ë¡œ ì—¬ê²¨ì ¸ìš”.

### ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì˜ ë™ì‘ ë°©ì‹

ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ëŠ” ì¼ë°˜ì ìœ¼ë¡œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¡œ ë§Œë“¤ì–´ì§€ëŠ”ë° ë™ì‘ ìˆœì„œë¥¼ ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ìë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

1. **ì½”ë“œ ì‘ì„±**

Solidityì™€ ê°™ì€ ì–¸ì–´ë¡œ ì •ë§ ê°„ë‹¨í•œ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

```solidity
pragma solidity ^0.8.26;

contract Coin {
    // The keyword "public" makes variables
    // accessible from other contracts
    address public minter;
    mapping(address => uint) public balances;

    // Events allow clients to react to specific
    // contract changes you declare
    event Sent(address from, address to, uint amount);

    // Constructor code is only run when the contract
    // is created
    constructor() {
        minter = msg.sender;
    }

    // Sends an amount of newly created coins to an address
    // Can only be called by the contract creator
    function mint(address receiver, uint amount) public {
        require(msg.sender == minter);
        balances[receiver] += amount;
    }

    // Errors allow you to provide information about
    // why an operation failed. They are returned
    // to the caller of the function.
    error InsufficientBalance(uint requested, uint available);

    // Sends an amount of existing coins
    // from any caller to an address
    function send(address receiver, uint amount) public {
        require(amount <= balances[msg.sender], InsufficientBalance(amount, balances[msg.sender]));
        balances[msg.sender] -= amount;
        balances[receiver] += amount;
        emit Sent(msg.sender, receiver, amount);
    }
}
```

ìœ„ì²˜ëŸ¼ ì‘ì„±ëœ ì»¨íŠ¸ë™íŠ¸ì—ëŠ” ëª‡ ê°€ì§€ ê°œë…ì´ ë“±ì¥í•©ë‹ˆë‹¤.

```solidity
address public minter;
```

ì´ ì½”ë“œëŠ” ì£¼ì†Œ íƒ€ì…ì˜ ìƒíƒœ ë³€ìˆ˜ minterë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤. address íƒ€ì…ì€ 160ë¹„íŠ¸ í¬ê¸°ë¡œ, ì—°ì‚°ì´ ë¶ˆê°€ëŠ¥í•˜ë©°, ê³„ì • ì£¼ì†Œ í˜¹ì€ ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œë¥¼ ì €ì¥í•  ë•Œ ì‚¬ìš©ë¼ìš”. ë˜í•œ public í‚¤ì›Œë“œë¥¼ ë¶™ì´ë©´ ì»´íŒŒì¼ëŸ¬ê°€ ìë™ìœ¼ë¡œ getter í•¨ìˆ˜ë¥¼ ìƒì„±í•´ì„œ ì™¸ë¶€ì—ì„œ ì´ ê°’ì„ ì¡°íšŒí•  ìˆ˜ ìˆì–´ìš”

```solidity
mapping(address => uint) public balances;
```

ì´ ì½”ë“œëŠ” addressë¥¼ í‚¤ë¡œ í•˜ê³ , í•´ë‹¹ ì£¼ì†Œì˜ì½”ì¸ ìˆ˜ëŸ‰ì„ ê°’ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ë§¤í•‘ì…ë‹ˆë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ publicì´ ë¶™ì—ˆê¸° ë•Œë¬¸ì— ì™¸ë¶€ì—ì„œ balancesë¥¼ ì£¼ì†Œ í˜•íƒœë¡œ ì¡°íšŒí•  ìˆ˜ ìˆì–´ìš”

```solidity
event Sent(address from, address to, uint amount);
```

send()í•¨ìˆ˜ì˜ ë§ˆì§€ë§‰ ì¤„ì—ì„œ í˜¸ì¶œë˜ëŠ” ì´ë²¤íŠ¸ì—ìš”. Sent ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ ë¦¬ìŠ¤ë„ˆëŠ” ì „ì†¡ì, ìˆ˜ì‹ ì, ê¸ˆì•¡ ì •ë³´ë¥¼ ë°›ì•„ì„œ transactionì„ ì¶”ì í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```solidity
constructor() {
    minter = msg.sender;
}
```

ìƒì„±ì(Constructor) ì½”ë“œëŠ” ì»¨íŠ¸ë™íŠ¸ê°€ ë°°í¬ë  ë•Œ í•œ ë²ˆë§Œ ì‹¤í–‰ë¼ìš”. msg.senderëŠ” ì»¨íŠ¸ë™íŠ¸ë¥¼ ë°°í¬í•œ ì£¼ì†Œì´ê³ , ì´ë¥¼ minterë¡œ ì €ì¥í•©ë‹ˆë‹¤.

```solidity
function mint(address receiver, uint amount) public {
    require(msg.sender == minter);
    balances[receiver] += amount;
}
```

ìƒˆë¡œìš´ ì½”ì¸ì„ ë°œí–‰í•˜ì—¬ ë‹¤ë¥¸ ì£¼ì†Œë¡œ ì „ì†¡í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œ `require(msg.sender == minter)` ì¡°ê±´ì€ ì˜¤ì§ ë°°í¬ìë§Œì´ ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ ì œí•œí•´ìš”. ê·¸ë¦¬ê³  ë§Œì•½ `balances[receiver]+amount` ì—°ì‚°ì´ uint256ì˜ ìµœëŒ€ê°’ì„ ë„˜ëŠ”ë‹¤ë©´,  Solidityì˜ ê¸°ë³¸ ì—°ì‚° ì•ˆì „ì„±(Checked Arithmetic)ì— ë”°ë¼ íŠ¸ëœì­ì…˜ì€ ìë™ìœ¼ë¡œ revert ë©ë‹ˆë‹¤.

```solidity
error InsufficientBalance(uint requested, uint available);
```

ì—ëŸ¬ë©”ì‹œì§€ errorì™€ revertë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ ì‚¬ìš©ìê°€ ê°€ì§„ ì½”ì¸ë³´ë‹¤ ë” ë§ì€ ì–‘ì„ ë³´ë‚´ë ¤ê³  í•  ê²½ìš°ì—ëŠ” InsufficientBalance ì˜¤ë¥˜ì™€ í•¨ê»˜ íŠ¸ëœì­ì…˜ì´ ì·¨ì†Œë¼ìš”.

```solidity
function send(address receiver, uint amount) public {
    require(amount <= balances[msg.sender], InsufficientBalance(amount, balances[msg.sender]));
    balances[msg.sender] -= amount;
    balances[receiver] += amount;
    emit Sent(msg.sender, receiver, amount);
}
```

ìì‹ ì´ ë³´ìœ í•œ ì½”ì¸ì„ ë‹¤ë¥¸ ì£¼ì†Œë¡œ ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ require ì¡°ê±´ì„ ì¶©ì¡±í•˜ì§€ ëª»í•œë‹¤ë©´ InsufficientBalance ì—ëŸ¬ê°€ ë‚˜ëŠ” ì½”ë“œì—ìš”.

2. **ì»´íŒŒì¼ ë° ë°°í¬**

ì‘ì„±í•œ ì½”ë“œëŠ” Solidity ì»´íŒŒì¼ëŸ¬ë¥¼ í†µí•´ Bytecodeì™€ Application Binary Interface (ABI)ë¡œ ë³€í™˜ë©ë‹ˆë‹¤. 

- BytecodeëŠ” ì´ë”ë¦¬ì›€ ê°€ìƒë¨¸ì‹ (EVM)ì´ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì €ìˆ˜ì¤€ ì½”ë“œë¡œ, ì»¨íŠ¸ë™íŠ¸ë¥¼ ë¸”ë¡ì²´ì¸ì— ë°°í¬í•  ë•Œ ì‚¬ìš©ë¼ìš”.
- ABIëŠ” ì™¸ë¶€ì—ì„œ ì»¨íŠ¸ë™íŠ¸ì˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ì‚¬ìš©ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¡œ, í•¨ìˆ˜ ì´ë¦„ê³¼ íŒŒë¼ë¯¸í„° í˜•ì‹ì„ ì •ì˜í•˜ê³  ìˆì–´ìš”

ì´ë ‡ê²Œ ìƒì„±ëœ ë°”ì´íŠ¸ ì½”ë“œëŠ” íŠ¸ëœì­ì…˜ í˜•íƒœë¡œ ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ì— ì „íŒŒë˜ë©°, ì´ íŠ¸ëœì­ì…˜ì´ ë¸”ë¡ì´ í¬í•¨ë˜ë©´ í•´ë‹¹ ì»¨íŠ¸ë™íŠ¸ëŠ” ê³ ìœ í•œ ì£¼ì†Œë¥¼ ë¶€ì—¬ë°›ì•„ ë¸”ë¡ì²´ì¸ì— ë“±ë¡ë©ë‹ˆë‹¤.

![](ko/image1.png)

3. **íŠ¸ëœì­ì…˜ í˜¸ì¶œ**

```solidity
function send(address receiver, uint amount) public {
        require(amount <= balances[msg.sender], InsufficientBalance(amount, balances[msg.sender]));
        balances[msg.sender] -= amount;
        balances[receiver] += amount;
        emit Sent(msg.sender, receiver, amount);
    }
```

ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì˜ íŠ¹ì • í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³ ì í•˜ëŠ” ì‚¬ìš©ìëŠ” í•¨ìˆ˜ í˜¸ì¶œ ì •ë³´(ëŒ€ìƒ ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œ, ABI ê¸°ë°˜ í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜, ê°€ìŠ¤ ì •ë³´ ë“±)ë¥¼ ë‹´ì€ íŠ¸ëœì­ì…˜ì„ ìƒì„±í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ì— ë¸Œë¡œë“œìºìŠ¤íŠ¸í•©ë‹ˆë‹¤. ì˜ˆì‹œ ì½”ë“œì²˜ëŸ¼ ì‚¬ìš©ìê°€ Coin.solì˜ send() í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œë‹¤ëŠ” íŠ¸ëœì­ì…˜ì„ ìƒì„±í•œë‹¤ê³  í•  ë•Œ, íŠ¸ëœì­ì…˜ì€ ë…¸ë“œì˜ mempoolì— ì¼ì‹œì ìœ¼ë¡œ ì €ì¥ë˜ê³ , ë¸”ë¡ ìƒì„±ì(miner ë˜ëŠ” validator)ê°€ ì„ íƒí•´ ë¸”ë¡ì— í¬í•¨í•©ë‹ˆë‹¤. ì´ ë•Œ íŠ¸ëœì­ì…˜ì´ mempoolì— ë“¤ì–´ê°„ í›„, ìˆ˜ìˆ˜ë£Œ(gas price)ê°€ ë†’ì€ ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬ë¼ìš”!

â†’ mempool(Memory Pool): ì•„ì§ ë¸”ë¡ì— í¬í•¨ë˜ì§€ ì•Šì€ íŠ¸ëœì­ì…˜ë“¤ì´ ì„ì‹œë¡œ ì €ì¥ë˜ëŠ” ê³µê°„

![](ko/image2.png)

 ì´ íŠ¸ëœì ì…˜ì„ ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ì— ë¸Œë¡œë“œìºìŠ¤íŒ…ì„ í•©ë‹ˆë‹¤. 

![](ko/image3.png)

4. **ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ì‹¤í–‰ (EVM)**

ë¸”ë¡ ìƒì„±ìê°€ ë¨¼ì € ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ ì‹¤í–‰í•˜ê³ , ë‹¤ë¥¸ ê²€ì¦ ë…¸ë“œë“¤ì€ ì´ë¥¼ ë™ì¼í•˜ê²Œ ì¬ì‹¤í–‰í•˜ì—¬ ë¸”ë¡ì˜ ì •ë‹¹ì„±ì„ ê²€ì¦í•©ë‹ˆë‹¤. ë¸”ë¡ ìƒì„±ìëŠ” íŠ¸ëœì­ì…˜ì„ ì²˜ë¦¬í•  ë•Œ, EVMì„ í†µí•´ í•´ë‹¹ í•¨ìˆ˜(send() ë“±)ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. EVMì€ ì…ë ¥ê°’ì„ ë””ì½”ë”©í•˜ì—¬ í˜¸ì¶œí•  í•¨ìˆ˜ë¥¼ ë§¤í•‘í•˜ê³ , require ì¡°ê±´ë¬¸, ìƒíƒœ ë³€ê²½, ì´ë²¤íŠ¸ ê¸°ë¡ ë“± ì»¨íŠ¸ë™íŠ¸ì˜ ë¡œì§ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

```solidity
require(amount <= balances[msg.sender], InsufficientBalance(amount, balances[msg.sender]));
```

ì´ ì¡°ê±´ì´ ì¶©ì¡±ë˜ë©´ ê³„ì•½ì´ ì´í–‰ë˜ê³ , ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ InsufficientBalance ì˜¤ë¥˜ê°€ ë‚˜ revertë˜ê³  ëª¨ë“  ë³€ê²½ì´ ë¡¤ë°±ë¼ìš”.

5. **ê°€ìŠ¤ ì²˜ë¦¬**

ë˜í•œ EVMì˜ ì‹¤í–‰ì—ëŠ” ê°€ìŠ¤(Gas)ê°€ ì†Œëª¨ë©ë‹ˆë‹¤. ì´ëŠ” ì§€ì†ì ìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ë¥¼ ìš´ì˜í•˜ëŠ” ë…¸ë“œ(ê²€ì¦ì)ë“¤ì—ê²Œ ì¸ì„¼í‹°ë¸Œë¡œ ì£¼ì–´ì§€ê³ , ê³¼ë„í•œ ì—°ì‚°ì„ ë°©ì§€í•  ìˆ˜ë„ ìˆì–´ìš”. ì‚¬ìš©ìê°€ ì„¤ì •í•œ gasLimitê³¼ ì‹¤ì œ ì†Œëª¨ëŸ‰ì— ë”°ë¼ ë‚¨ì€ ê°€ìŠ¤ëŠ” í™˜ë¶ˆë˜ë©°, ì‹¤íŒ¨í•œ íŠ¸ëœì­ì…˜ë„ ê°€ìŠ¤ëŠ” ì†Œëª¨ë©ë‹ˆë‹¤.

6. **ê²°ê³¼ ì €ì¥**

íŠ¸ëœì­ì…˜ ì‹¤í–‰ì´ ì„±ê³µí•˜ë©´, ë‹¤ìŒê³¼ ê°™ì€ ê²°ê³¼ê°€ ë¸”ë¡ì²´ì¸ì— ë°˜ì˜ë©ë‹ˆë‹¤.

- ìƒíƒœ ë³€í™”: ì˜ˆë¥¼ ë“¤ì–´ `balances[msg.sender] -= amount` ê°™ì€ ë‚´ë¶€ ì €ì¥ì†Œ ë³€í™”ëŠ” ìƒíƒœ íŠ¸ë¼ì´(**state trie)**ì— ë°˜ì˜ë©ë‹ˆë‹¤.
- ì´ë²¤íŠ¸ ë¡œê·¸: `emit Sent(â€¦)` ì™€ ê°™ì€ ì´ë²¤íŠ¸ëŠ” ë³„ë„ì˜ ë¡œê·¸ ì €ì¥ì†Œ(receipts)ì— ê¸°ë¡ë©ë‹ˆë‹¤.

ì´ëŸ° ë°ì´í„°ë“¤ì€ ë¸”ë¡ì— í¬í•¨ë˜ì–´ ëª¨ë“  ë…¸ë“œê°€ ê³µìœ í•˜ëŠ” ì˜êµ¬ì ì¸ ê¸°ë¡ì´ ë˜ê³ , ëˆ„êµ¬ë“ ì§€ ì´ë¥¼ ê²€ì¦í•˜ê±°ë‚˜ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ëŠ” ì´ëŸ¬í•œ íŠ¹ì„±ì„ ë°”íƒ•ìœ¼ë¡œ, ì¡°ê±´ì´ ì¶©ì¡±ë˜ë©´ ìë™ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤ëŠ” ì ì—ì„œ ì „í†µì ì¸ ê³„ì•½ ë°©ì‹ë³´ë‹¤ ì•„ì£¼ íš¨ìœ¨ì ì´ì—ìš”. íŠ¹íˆ ì¤‘ê°œì ì—†ì´ë„ ê³„ì•½ì„ ì‹¤í–‰í•  ìˆ˜ ìˆê³ , ë¸”ë¡ì²´ì¸ì„ ê¸°ë°˜ìœ¼ë¡œ í•  ê²½ìš° íˆ¬ëª…ì„± ê³¼ ë³€ê²½ ë¶ˆê°€ëŠ¥ì„±ì´ ë³´ì¥ë˜ê¸° ë•Œë¬¸ì— ì‹ ë¢°ì„±ë„ ë†’ì€ í¸ì…ë‹ˆë‹¤. ì´ëŸ° ì¥ì  ë•ë¶„ì—, ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ëŠ” ì ì  ë‹¤ì–‘í•œ ë¶„ì•¼ë¡œ í™œìš© ë²”ìœ„ë¥¼ ë„“í˜€ê°€ê³  ìˆì–´ìš”

## ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì˜ í™œìš© ì‚¬ë¡€

ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ê°€ ì´ë”ë¦¬ì›€ì´ë¼ëŠ” ë¸”ë¡ì²´ì¸ í”Œë«í¼ì„ í†µí•´ ì²˜ìŒìœ¼ë¡œ í™œìš© ê¸°ë°˜ì„ ê°–ì¶˜ ì´í›„ë¡œ, ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ëŠ” ë‹¤ì–‘í•œ ë¶„ì•¼ë¡œ í™•ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. 

1. **DeFi (íƒˆì¤‘ì•™í™” ê¸ˆìœµ)**

DeFiëŠ” ê¸°ì¡´ì˜ ì€í–‰, ì¦ê¶Œì‚¬ ê°™ì€ ì¤‘ì•™í™”ëœ ê¸ˆìœµê¸°ê´€ ì—†ì´ë„, ë¸”ë¡ì²´ì¸ì„ ê¸°ë°˜ìœ¼ë¡œ ì˜ˆê¸ˆ, ëŒ€ì¶œ, ìì‚°ê±°ë˜, íŒŒìƒ ìƒí’ˆ ë“±ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” íƒˆ ì¤‘ì•™í™”ëœ ê¸ˆìœµ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. DeFi ì„œë¹„ìŠ¤ëŠ” ëª¨ë“  ê¸ˆìœµ ê±°ë˜ ë¡œì§ì„ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¡œ ì‘ì„±í•˜ê³  ìˆì–´ìš”.

ì˜ˆë¥¼ ë“¤ì–´, Aaveë‚˜ Compoundê°™ì€ DeFi í”Œë«í¼ì—ì„œëŠ” ì‚¬ìš©ìê°€ ì•”í˜¸í™”íë¥¼ ì˜ˆì¹˜í•˜ë©´ ìë™ìœ¼ë¡œ ì´ìë¥¼ ë°›ì„ ìˆ˜ ìˆê³ , ë‹¤ë¥¸ ì‚¬ìš©ìëŠ” ë‹´ë³´ë¥¼ ê±¸ê³  ëŒ€ì¶œì„ ë°›ì„ ìˆ˜ ìˆì–´ìš”

ë˜ ë‹¤ë¥¸ ì˜ˆë¡œëŠ” Uniswapì´ ìˆì–´ìš”. ì´ ì„œë¹„ìŠ¤ëŠ” ì¤‘ì•™ ê±°ë˜ì†Œ ì—†ì´ë„ ì•”í˜¸í™”íë¥¼ ìë™ìœ¼ë¡œ êµí™˜í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì‹œìŠ¤í…œì¸ë°, ê±°ë˜ëŠ” ë¯¸ë¦¬ ì˜ˆì¹˜ëœ ìœ ë™ì„± í’€ì„ í†µí•´ì„œ ì§„í–‰ë˜ê³ , êµí™˜ ë¡œì§ ì—­ì‹œ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¡œ ì²˜ë¦¬ë¼ìš”. ì´ì™€ ìœ ì‚¬í•˜ê²Œ CurveëŠ” ìŠ¤í…Œì´ë¸” ì½”ì¸ ê°„ì˜ êµí™˜ì— íŠ¹í™”ëœ í”Œë«í¼ìœ¼ë¡œ, ê±°ë˜ ê³¼ì • ë˜í•œ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì— ì˜í•´ ìë™ìœ¼ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.

2. **DAO (íƒˆì¤‘ì•™í™”ëœ ììœ¨ì¡°ì§)**

DAO (Decentralized Autonomous Organization)ëŠ” ì „í†µì ì¸ ì¡°ì§ì²˜ëŸ¼ íŠ¹ì • ê´€ë¦¬ìë‚˜ ìš´ì˜ìê°€ ì•„ë‹ˆë¼, ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì— ì˜í•´ ê·œì¹™ê³¼ ì˜ì‚¬ ê²°ì •ì´ ìë™ìœ¼ë¡œ ì§‘í–‰ë˜ëŠ” ì¡°ì§ í˜•íƒœì…ë‹ˆë‹¤. êµ¬ì„±ì›ë“¤ì€ DAO í† í°ì„ ë³´ìœ í•¨ìœ¼ë¡œì¨ íˆ¬í‘œì— ì°¸ì—¬í•˜ê³ , ì œì•ˆëœ ì•ˆê±´ì´ ì¼ì • ì¡°ê±´ì„ ì¶©ì¡±í•˜ë©´ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ê°€ ê·¸ ë‚´ìš©ì„ ìë™ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.

ëŒ€í‘œì ì¸ ì˜ˆì‹œë¡œëŠ” MarkerDAOê°€ ìˆìŠµë‹ˆë‹¤. MarkerDAOëŠ” ì´ë”ë¦¬ì›€ ë¸”ë¡ì²´ì¸ ê¸°ë°˜ì˜ DAOë¡œ, íƒˆì¤‘ì•™í™”ëœ ìŠ¤í…Œì´ë¸” ì½”ì¸ì¸ DAIë¥¼ ë°œí–‰í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤. MarkerDAOëŠ” DAIì˜ ê°€ì¹˜ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€í•˜ë©´ì„œ êµ¬ì„±ì›ë“¤ì´ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ í†µí•´ ì´ììœ¨ ì¡°ì •ì´ë‚˜ ì‹œìŠ¤í…œ ì—…ê·¸ë ˆì´ë“œ ë“±ì— ëŒ€í•´ íˆ¬í‘œí•´ìš”.

ì´ì²˜ëŸ¼ DAOëŠ” ì‚¬ëŒì˜ ê°œì… ì—†ì´ë„ ì½”ë“œì— ì˜í•´ ìš´ì˜ì´ ì¡°ì§ë  ìˆ˜ ìˆëŠ” í˜•íƒœì…ë‹ˆë‹¤. 

3. **CryptoKitties**

CryptoKittiesëŠ” 2017ë…„ ë“±ì¥í•œ ì´ë”ë¦¬ì›€ ê¸°ë°˜ì˜ ë¸”ë¡ì²´ì¸ ê²Œì„ì´ì—ìš”. ì´ ê²Œì„ì€ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ í™œìš©í•´ ë””ì§€í„¸ ê³ ì–‘ì´ë¥¼ ìˆ˜ì§‘í•˜ê³  êµë°°í•˜ë©° ê±°ë˜í•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œìœ¼ë¡œ êµ¬í˜„ë˜ì—ˆì–´ìš”.

ì´ ê²Œì„ì—ì„œ ê³ ì–‘ì´ëŠ” ê°ê° ê³ ìœ í•œ íŠ¹ì„±ê³¼ ì™¸í˜•ì„ ì§€ë‹Œ NFTë¡œ í‘œí˜„ë¼ìš”. ì‚¬ìš©ìëŠ” ë‘ ë§ˆë¦¬ì˜ ê³ ì–‘ì´ë¥¼ êµë°°ì‹œì¼œ ìƒˆë¡œìš´ ê³ ì–‘ì´ë¥¼ íƒ„ìƒì‹œí‚¬ ìˆ˜ ìˆê³ , ì´ ë•Œ ìœ ì „ ì •ë³´ì˜ ì¡°í•©ê³¼ êµë°° ê²°ê³¼ëŠ” ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì— ì˜í•´ ìë™ìœ¼ë¡œ ê²°ì •ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ ìƒì„±ëœ ê³ ì–‘ì´ëŠ” ìƒˆë¡œìš´ NFTë¡œ ë“±ë¡ë˜ê³ , ì‚¬ìš©ìëŠ” ì´ ê³ ì–‘ì´ë¥¼ ë‹¤ë¥¸ ì‚¬ìš©ìì—ê²Œ íŒë§¤í•˜ê±°ë‚˜ ë³´ìœ í•  ìˆ˜ ìˆì–´ìš”. ì´ ê²Œì„ì€ ì¶œì‹œ ì§í›„ í° ì¸ê¸°ë¥¼ ëŒë©° ì´ë”ë¦¬ì›€ ë„¤íŠ¸ì›Œí¬ì— ê³¼ë¶€í•˜ë¥¼ ì¼ìœ¼í‚¬ ì •ë„ì˜€ì–´ìš”.

ìœ„ì™€ ê°™ì´ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ëŠ” ê¸ˆìœµ, ì¡°ì§ ìš´ì˜, ê²Œì„ ë“± ë‹¤ì–‘í•œ ë¶„ì•¼ì—ì„œ í™œë°œí•˜ê²Œ í™œìš©ë˜ê³  ìˆì–´ìš”. ë¸”ë¡ì²´ì¸ì€ ë³´ì•ˆì„±ì´ ë›°ì–´ë‚œ ê¸°ìˆ ë¡œ ì•Œë ¤ì ¸ ìˆì§€ë§Œ, ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì—ì„œëŠ” ì‹¤ì œë¡œ ëª‡ ì°¨ë¡€ í•´í‚¹ ì‚¬ë¡€ê°€ ë°œìƒí•œ ë°” ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒì€ ì‹¤ì œ ì‚¬ë¡€ì™€ í•¨ê»˜ smart contractì˜ ì·¨ì•½ì ì„ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.

## Smart Contractì˜ ì·¨ì•½ì 

### 1. Reentrancy Attack

Reentrancy Attack(ì¬ì§„ì… ê³µê²©)ì€ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ê°€ ìì‹ ì˜ ìƒíƒœ(state)ë¥¼ ì—…ë°ì´íŠ¸ í•˜ê¸°ì „ì— ì™¸ë¶€ ì»¨íŠ¸ë™íŠ¸ë¡œ í˜¸ì¶œì„ ìˆ˜í–‰í•  ë•Œ ë°œìƒí•˜ëŠ” ì·¨ì•½ì ì…ë‹ˆë‹¤. ì´ ê²½ìš°, ì™¸ë¶€ ì»¨íŠ¸ë™íŠ¸(ì•…ì˜ì ì¸ ê²½ìš°)ê°€ ì›ë˜ í•¨ìˆ˜ë¡œ ë‹¤ì‹œ ì¬ì§„ì…í•˜ì—¬, ê°™ì€ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¶œê¸ˆ ë“±ì˜ ë™ì‘ì„ ë°˜ë³µì ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆì–´ìš”. 

ì´ ì·¨ì•½ì ì€ 2016ë…„ DAO í•´í‚¹ ì‚¬ê±´ìœ¼ë¡œ ì¸í•´ ì•½ 6000ë§Œ ë‹¬ëŸ¬ê°€ íƒˆì·¨ë‹¹í•˜ë©´ì„œ, ê°€ì¥ ë¨¼ì € ê²€í† í•´ì•¼í•  ë³´ì•ˆ í•­ëª©ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.

ê·¸ ì˜ˆì‹œëŠ” ì•„ë˜ì™€ ê°™ì•„ìš”.

- ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ê°€ ì™¸ë¶€ ì£¼ì†Œ (ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸)ë¡œ ì´ë”(ETH)ë‚˜ í† í°ì„ ì „ì†¡í•˜ë©´, ìˆ˜ì‹ ì ìª½ì˜ í•¨ìˆ˜ (fallback() ë˜ëŠ” receive())ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.
- ì´ ë•Œ ê·¸ í•¨ìˆ˜ ì•ˆì˜ ì½”ë“œê°€ ì‹¤í–‰ë˜ë¯€ë¡œ, ì‹¤í–‰ íë¦„ì´ ì™¸ë¶€ ì»¨íŠ¸ë™íŠ¸ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.
- ê³µê²©ìëŠ” ì´ ê¸°íšŒë¥¼ ì´ìš©í•´ ë‹¤ì‹œ ì›ë˜ ì»¨íŠ¸ë™íŠ¸ì˜ í•¨ìˆ˜ë¥¼ ì¬í˜¸ì¶œí•˜ë©´, ì›ë˜ ì»¨íŠ¸ë™íŠ¸ëŠ” ì•„ì§ ì´ì „ í•¨ìˆ˜ ì‹¤í–‰ì´ ëë‚˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì—, ìƒíƒœê°€ ì •ë¦¬ë˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ ë˜ ì‹¤í–‰ë˜ê²Œ ë©ë‹ˆë‹¤.
- ê·¸ ê²°ê³¼, ì”ì•¡ ê²€ì¦ ì´ì „ì— ê³„ì† ìê¸ˆì„ ë¹¼ë‚´ëŠ” ë“±ì˜ ê³µê²©ì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.

ì•„ë˜ ì½”ë“œëŠ” DAO í•´í‚¹ ë‹¹ì‹œ ì·¨ì•½í–ˆë˜ í•¨ìˆ˜ splitDAO()ì˜ ì¼ë¶€ë¡œ, ì¬ì§„ì… ê³µê²©ì— ì·¨ì•½í–ˆë˜ êµ¬ì¡°ì…ë‹ˆë‹¤.

```solidity
function splitDAO(uint _proposalID, address _newCurator) noEther onlyTokenholders returns (bool _success) {
    ...
		// [1]
    uint fundsToBeMoved = (balances[msg.sender] * p.splitData[0].splitBalance) / p.splitData[0].totalSupply;
    //Since the balance is never updated the attacker can pass this modifier several times 
    // [2]
    if (p.splitData[0].newDAO.createTokenProxy.value(fundsToBeMoved)(msg.sender) == false) throw;

    ...

    // Burn DAO Tokens
    // Funds are transferred before the balance is updated
    //[3]
    Transfer(msg.sender, 0, balances[msg.sender]);
    withdrawRewardFor(msg.sender); // be nice, and get his rewards
    // Only now after the funds are transferred is the balance updated
    totalSupply -= balances[msg.sender];
    paidOut[msg.sender] = 0;
    return true;
}
```

splitDAO() í•¨ìˆ˜ëŠ” ì‚¬ìš©ìê°€ DAOë¥¼ íƒˆí‡´í•˜ê³  ìƒˆë¡œìš´ DAOë¡œ ì´ë™í•  ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤.

\[1]ì—ì„œëŠ” ì‚¬ìš©ìê°€ ë°›ì„ ì´ë” ê¸ˆì•¡ì¸ `fundsToBeMoved`ì„ ê³„ì‚°í•˜ëŠ”,. ì´ ë•Œ ì‚¬ìš©ë˜ëŠ” `balances[msg.sender]`ëŠ” ì•„ì§ ì¤„ì–´ë“¤ì§€ ì•Šì€ ìƒíƒœì…ë‹ˆë‹¤. 

\[2]ì—ì„œ ì´ë”ë¥¼ ì „ì†¡í•˜ë©´ì„œ ì™¸ë¶€ ì»¨íŠ¸ë™íŠ¸ì˜ í•¨ìˆ˜(`createTokenProxy`)ë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ëŠ”ë°, ì´ ë•Œ ê³µê²©ìê°€ ë§Œë“  ì•…ì„± ì»¨íŠ¸ë™íŠ¸ê°€ splitDAO()ë¥¼ ë‹¤ì‹œ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ëŸ¬ë©´ `balances[msg.sender]`ëŠ” ì—¬ì „íˆ ê°’ì´ ê·¸ëŒ€ë¡œì´ê¸° ë•Œë¬¸ì—, ë™ì¼í•œ ê¸ˆì•¡ì„ ì—¬ëŸ¬ ë²ˆ ìš”ì²­ì— ìê¸ˆì„ ë°˜ë³µí•´ì„œ ì¸ì¶œí•  ìˆ˜ ìˆê²Œ ë¼ìš”.

\[3] ì´í›„ì— ë‚´ë¶€ ìƒíƒœë¥¼ ë³€ê²½í•˜ì§€ë§Œ, ì´ë¯¸ ì™¸ë¶€ í˜¸ì¶œì´ ëë‚œ í›„ì— ë°œìƒí•˜ë¯€ë¡œ, ë°©ì–´ì—ëŠ” ì „í˜€ íš¨ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. 

**Mitigation**

1. **Checks-Effects-Interactions íŒ¨í„´ ì‚¬ìš©**
ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ëŠ” ì™¸ë¶€ ì»¨íŠ¸ë™íŠ¸ì™€ ìƒí˜¸ì‘ìš© í•˜ê¸° ì „ì— ë‚´ë¶€ ìƒíƒœë¥¼ ë¨¼ì € ë³€ê²½í•´ì•¼í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ checks â†’ Effects â†’ Interaction ìˆœì„œë¡œ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
- Checks: ì…ë ¥ê°’ê³¼ ì¡°ê±´ ê²€ì¦
- Effects: ìƒíƒœ ë³€ìˆ˜ ì—…ë°ì´íŠ¸
- Interactions: ì™¸ë¶€ ì»¨íŠ¸ë™íŠ¸ í˜¸ì¶œ
2. **ReentrancyGuard ì‚¬ìš©**
[OpenZeppelin](https://docs.openzeppelin.com/contracts/4.x/api/security#ReentrancyGuard)ì—ì„œ ì œê³µí•˜ëŠ” ReentrancyGuardëŠ” ì¬ì§„ì… ê³µê²©ì„ ë°©ì§€í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤. `nonReentrant` modifierë¥¼ ì ìš©í•˜ë©´, í•¨ìˆ˜ê°€ ì‹¤í–‰ ì¤‘ì¼ ë•Œ ë™ì¼í•œ í•¨ìˆ˜ê°€ ë‹¤ì‹œ í˜¸ì¶œë˜ëŠ” ê²ƒì„ ì°¨ë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 2. Improper Access Control

Access control vulnerability (ì ‘ê·¼ ì œì–´ ì·¨ì•½ì )ëŠ” ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì—ì„œ íŠ¹ì • ê¸°ëŠ¥ì´ë‚˜ ë°ì´í„°ì— ëŒ€í•œ ì ‘ê·¼ì„ ì ì ˆí•˜ê²Œ ì œí•œí•˜ì§€ ëª»í•  ë•Œ ë°œìƒí•˜ëŠ” ì·¨ì•½ì ì…ë‹ˆë‹¤.

ì´ë¡œ ì¸í•´ ê¶Œí•œì´ ì—†ëŠ” ì‚¬ìš©ìë„ ë¯¼ê°í•œ ê¸°ëŠ¥(ex. í† í° ë°œí–‰, ìì‚° ì¸ì¶œ, ê³„ì•½ ì •ì§€, ì—…ê·¸ë ˆì´ë“œ ë“±)ì— ì ‘ê·¼í•  ìˆ˜ ìˆì–´ ê³„ì•½ì˜ ë³´ì•ˆì„±ê³¼ ë¬´ê²°ì„±ì„ ìœ„í˜‘í•©ë‹ˆë‹¤.

ì•„ë˜ëŠ” ì·¨ì•½í•œ ë²„ì „ì˜ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì…ë‹ˆë‹¤.

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract Solidity_AccessControl {
    mapping(address => uint256) public balances;

    // Burn function with no access control
    function burn(address account, uint256 amount) public {
        _burn(account, amount);
    }
}
```

ì´ ì˜ˆì œëŠ” ëˆ„êµ¬ë‚˜ burn í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìœ¼ë©°, ì•„ë¬´ ì£¼ì†Œì˜ í† í° ì”ì•¡ì„ ì¤„ì´ê±°ë‚˜ íŒŒê´´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì»¨íŠ¸ë™íŠ¸ëŠ” ê¶Œí•œ ê²€ì¦ ì—†ì´ ë¯¼ê°í•œ ê¸°ëŠ¥ì„ ë…¸ì¶œí•œ ì „í˜•ì ì¸ ì˜ˆì‹œì…ë‹ˆë‹¤.

ì•„ë˜ ì½”ë“œëŠ” onlyOwner modifierë¥¼ í†µí•´ ì˜¤ì§ ì»¨íŠ¸ë™íŠ¸ ì†Œìœ ìë§Œ burnì„ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •ëœ ë²„ì „ì…ë‹ˆë‹¤.

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

// Import the Ownable contract from OpenZeppelin to manage ownership
import "@openzeppelin/contracts/access/Ownable.sol";

contract Solidity_AccessControl is Ownable {
    mapping(address => uint256) public balances;

    // Burn function with proper access control, only accessible by the contract owner
    function burn(address account, uint256 amount) public onlyOwner {
        _burn(account, amount);
    }
}
```

**ì‹¤ì œ ì‚¬ë¡€**

- 2017ë…„ ë°œìƒí•œ Parity Multisig Wallet í•´í‚¹ì€ ì´ˆê¸°í™” í•¨ìˆ˜ `initWallet()`ì— ì ‘ê·¼ ì œí•œì´ ì—†ì—ˆë˜ ê²ƒì´ ì›ì¸ì´ì—ˆìŠµë‹ˆë‹¤. ì´ ë•Œ ê³µê²©ìëŠ” í•´ë‹¹ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ ìì‹ ì„ ì§€ê°‘ì˜ ì†Œìœ ìë¡œ ë“±ë¡í–ˆê³ , ì•½ 15ë§Œ ETH(ë‹¹ì‹œ ì•½ 3ì²œë§Œ ë‹¬ëŸ¬)ë¥¼ íƒˆì·¨í–ˆìŠµë‹ˆë‹¤.

**Mitigation**

1. **ê¶Œí•œ ì œì–´ ëª¨ë“ˆ ì‚¬ìš©**
OpenZeppelinì˜ [`Ownable`](https://docs.openzeppelin.com/contracts/2.x/api/ownership#Ownable), `AccessControl`, `RBAC`(Role-Based Access Control) ê°™ì€ ê²€ì¦ëœ ì ‘ê·¼ ì œì–´ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
2. **ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ë‚´ì— ëª…í™•í•˜ê³  ì²´ê³„ì ìœ¼ë¡œ ì ‘ê·¼ ì œì–´ ë§¤ì»¤ë‹ˆì¦˜ì„ ì„¤ê³„í•˜ê³  êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.**

### 3. **Price oracle manipulation**

ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ëŠ” ì™¸ë¶€ë¡œë¶€í„° ê°€ê²©ì´ë‚˜ ê¸°íƒ€ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ì˜¤ë¼í´ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. íŠ¹íˆ DeFiì—ì„œ ìì‚° ê°€ê²©ì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ì˜¤ë¼í´ì„ ìì£¼ ì‚¬ìš©í•˜ëŠ”ë°, ì´ ì˜¤ë¼í´ì´ ì¡°ì‘ë˜ê±°ë‚˜, ì·¨ì•½í•˜ê±°ë‚˜, ì‹ ë¢°ì„±ì´ ë¶€ì¡±í•˜ë‹¤ë©´ ê³µê²©ìê°€ ê±°ì§“ ê°€ê²© ì •ë³´ë¥¼ ì£¼ì…í•´ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì˜ ì˜ëª»ëœ ë™ì‘ì„ ìœ ë°œí•©ë‹ˆë‹¤. ì´ ì·¨ì•½ì ìœ¼ë¡œ ì¸í•´ ë¬´ë‹¨ ì¸ì¶œ, ê³¼ë„í•œ ë ˆë²„ë¦¬ì§€, ì»¨íŠ¸ë™íŠ¸ íŒŒì‚°, ìœ ë™ì„± í’€ ê³ ê°ˆ ë“±ì˜ í”¼í•´ë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¤ìŒ ì˜ˆì‹œëŠ” ê°œë…ì„ ì„¤ëª…í•˜ê¸° ìœ„í•´ ì‘ì„±ëœ ìƒ˜í”Œ ì½”ë“œì…ë‹ˆë‹¤. 

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;
// [1]
interface IPriceFeed {
    function getLatestPrice() external view returns (int);
}

contract PriceOracleManipulation {
    address public owner;
    IPriceFeed public priceFeed;

    constructor(address _priceFeed) {
        owner = msg.sender;
        priceFeed = IPriceFeed(_priceFeed);
    }
		// [2]
    function borrow(uint256 amount) public {
        int price = priceFeed.getLatestPrice();
        require(price > 0, "Price must be positive");
	
        // Vulnerability: No validation or protection against price manipulation
        //[3]
        uint256 collateralValue = uint256(price) * amount;

        // Borrow logic based on manipulated price
        // If an attacker manipulates the oracle, they could borrow more than they should
    }

    function repay(uint256 amount) public {
        // Repayment logic
    }
}
```

\[1]ì˜ getLatestPrice() í•¨ìˆ˜ë¡œ ì™¸ë¶€ ì‹œìŠ¤í…œ(ì˜¤ë¼í´)ì—ì„œ ìµœì‹  ê°€ê²©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. ì´ ì˜¤ë¼í´ì„ ì¡°ì‘í•  ìˆ˜ ìˆê±°ë‚˜ ì‹ ë¢°í•  ìˆ˜ ì—†ë‹¤ë©´, ê³µê²©ìëŠ” í—ˆìœ„ ê°€ê²© ë°ì´í„°ë¥¼ ì»¨íŠ¸ë™íŠ¸ì— ì£¼ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

\[2]ë¡œ borrow()ë¥¼ í˜¸ì¶œí•  ë•Œ, ì˜¤ë¼í´ë¡œë¶€í„° ìì‚°ì˜ í˜„ì¬ ê°€ê²©ì„ ë°›ì•„ì˜µë‹ˆë‹¤. price > 0 ì¡°ê±´ì€ ë‹¨ìˆœíˆ ìœ íš¨ì„± ê²€ì‚¬ê³ , ì¡°ì‘ëœ ê°€ê²©ì— ëŒ€í•œ ë°©ì–´ê°€ ì—†ìŠµë‹ˆë‹¤.

\[3]ì—ì„œëŠ” ë°›ì•„ì˜¨ ê°€ê²© ê°’ê³¼ amountë¥¼ ê³±í•´ì„œ ë‹´ë³´ ê°€ì¹˜ë¥¼ ê³„ì‚°í•˜ëŠ”ë°, ì´ ê°’ì´ ê³¼ëŒ€í‰ê°€ë˜ë©´ ê³µê²©ìëŠ” ì‹¤ì œë³´ë‹¤ ë” ë§ì€ ìê¸ˆì„ ë¹Œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ ê³µê²©ìê°€ í—ˆìœ„ ê°€ê²© ë°ì´í„°ë¥¼ ì£¼ì…í–ˆë‹¤ë©´, ë‹´ë³´ ëŒ€ë¹„ ì´ˆê³¼ ëŒ€ì¶œì´ ë°œìƒí•˜ê³  ì‹œìŠ¤í…œ ìì‚° ìœ ì¶œë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•„ë˜ëŠ” ì•ì„œ ë³´ì—¬ì¤€ ì·¨ì•½í•œ ë²„ì „ì˜ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ ë³´ì™„í•œ ì½”ë“œì…ë‹ˆë‹¤.

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

interface IPriceFeed {
    function getLatestPrice() external view returns (int);
}

contract PriceOracleManipulation {
    address public owner;
    IPriceFeed public priceFeed;
    // [1]
    int public minPrice = 1000; // Set minimum acceptable price
    int public maxPrice = 2000; // Set maximum acceptable price

    constructor(address _priceFeed) {
        owner = msg.sender;
        priceFeed = IPriceFeed(_priceFeed);
    }

    function borrow(uint256 amount) public {
        int price = priceFeed.getLatestPrice();
        // [2]
        require(price > 0 && price >= minPrice && price <= maxPrice, "Price manipulation detected");

        uint256 collateralValue = uint256(price) * amount;

        // Borrow logic based on valid price
    }

    function repay(uint256 amount) public {
        // Repayment logic
    }
}
```

\[1] ê°€ê²© ì¡°ì‘ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ê¸°ì¤€ê°’ ë³€ìˆ˜ë¥¼ ì •í•˜ê³  \[2] ê°€ê²© ê²€ì¦ì„ ìœ„í•œ ë¡œì§ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.

**ì‹¤ì œ ì‚¬ë¡€**

- 2023ë…„ 2ì›” BonqDAO í”„ë¡œí† ì½œì— ì˜¤ë¼í´ ì¡°ì‘ ê³µê²©ì´ ë°œìƒí•´ 1ì–µ 2ì²œë§Œ ë‹¬ëŸ¬ì˜ ì†ì‹¤ì„ ì…í˜”ìŠµë‹ˆë‹¤. ê³µê²©ìëŠ” ì˜¤ë¼í´ì„ í†µí•´ ALBT í† í° ê°€ê²©ì„ ì¸ìœ„ì ìœ¼ë¡œ ë¶€í’€ë¦¬ê³ , ì´ë¥¼ ë‹´ë³´ë¡œ BEUR ìŠ¤í…Œì´ë¸” ì½”ì¸ì„ ê³¼ë„í•˜ê²Œ ë°œí–‰í–ˆìŠµë‹ˆë‹¤. ì´ ê³µê²©ì˜ ì›ì¸ì€ ì˜¤ë¼í´ ê°€ê²© ê²€ì¦ ë¶€ì¬ì˜€ìŠµë‹ˆë‹¤.
- 2023ë…„ 5ì›” Baby Doge í† í°ì´ ì˜¤ë¼í´ ì¡°ì‘ ê³µê²©ìœ¼ë¡œ ì¸í•´ ì•½ 13ë§Œ 7ì²œ ë‹¬ëŸ¬ ìƒë‹¹ì˜ í”¼í•´ë¥¼ ì…ì—ˆìŠµë‹ˆë‹¤.

**mitigation**

- ì—¬ëŸ¬ ê°œì˜ ë…ë¦½ì ì¸ ì˜¤ë¼í´ë¡œë¶€í„° ë°ì´í„°ë¥¼ ì§‘ê³„í•˜ë©´ ì¡°ì‘ ìœ„í—˜ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ë¡œì§ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆëŠ” ê¸‰ê²©í•œ ê°€ê²© ë³€ë™ì„ ë°©ì§€í•˜ê¸° ìœ„í•´, ì˜¤ë¼í´ë¡œë¶€í„° ë°›ì€ ê°€ê²©ì— ìµœì†Œê°’ ë° ìµœëŒ€ê°’ ì„ê³„ ì¡°ê±´ì„ ì„¤ì •í•©ë‹ˆë‹¤.
- íƒ€ì„ë½(time lock)ì„ ë„ì…í•˜ì—¬, ê°€ê²© ì—…ë°ì´íŠ¸ ì‚¬ì´ì— ì§€ì—°ì„ ë‘ë©´ ì¦‰ê°ì ì¸ ê°€ê²© ë³€ë™ì„ ì•…ìš©í•˜ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì˜¤ë¼í´ë¡œë¶€í„° ë°›ì€ ë°ì´í„°ì˜ ì‹ ë¢°ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´, ì•”í˜¸í•™ì  ì„œëª… ë“± ì¦ëª… ë°©ì‹ì„ í™œìš©í•©ë‹ˆë‹¤.

ì´ë²ˆ ì—°êµ¬ê¸€ì—ì„œëŠ” ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì˜ ê°œë…ê³¼ ë™ì‘ ë°©ì‹, ê·¸ë¦¬ê³  ëŒ€í‘œì ì¸ ë³´ì•ˆ ì·¨ì•½ì  ëª‡ ê°€ì§€ë¥¼ ë‹¤ë¤˜ì–´ìš”. ì‚¬ì‹¤ ì²˜ìŒì—ëŠ” ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì˜ ì·¨ì•½ì ì„ ì¢€ ë” ë‹¤ë£¨ê³  ì‹¶ì—ˆëŠ”ë° ë¶„ëŸ‰ ë¬¸ì œë¡œ 3ê°€ì§€ë§Œ ê°„ë‹¨íˆ ì •ë¦¬í•  ìˆ˜ë°–ì— ì—†ì—ˆìŠµë‹ˆë‹¤..

ë‹¤ìŒì—ëŠ” ì‹¤ì œ í•´í‚¹ ì‚¬ë¡€ì™€ ë‹¤ì–‘í•œ ì·¨ì•½ì ì„ ë” ë‹¤ë¤„ë³¼ê¹Œ ìƒê°ì¤‘ì´ì—ìš”. 

ë¼ê³  ë§í–ˆì§€ë§Œ ë‹¤ìŒ ì£¼ì œê°€ ê¼­ ê·¸ë ‡ê²Œ ë ì§€ëŠ” ì•„ì§ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤. ğŸ˜… ê¸´ ì—°êµ¬ê¸€ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!

### Reference

[https://docs.soliditylang.org/en/latest/introduction-to-smart-contracts.html](https://docs.soliditylang.org/en/latest/introduction-to-smart-contracts.html)

[https://github.com/pcaversaccio/reentrancy-attacks](https://github.com/pcaversaccio/reentrancy-attacks)

[https://owasp.org/www-project-smart-contract-top-10/](https://owasp.org/www-project-smart-contract-top-10/)

[https://medium.com/coinmonks/10-smart-contract-vulnerabilities-with-code-examples-38562685fca2](https://medium.com/coinmonks/10-smart-contract-vulnerabilities-with-code-examples-38562685fca2)